고장 횟수 데이터는 왜 일반 회귀로 처리하면 안 될까?


제조업, 자동차 업계 데이터를 분석하다 보면



"횟수(Count)" 형태의 데이터가 정말 자주 등장합니다.

차량 A의 월별 고장 횟수
공장 라인의 시간당 불량 건수
특정 오류 코드 발생 횟수
하루 동안 클레임(항의) 발생 수


이런 값들은 0,1,2,3, ... 처럼 "정수이고,

음수는 절대 없고,

대부분 0에 가깝고, 가끔 크게 튀는 값들이 있는 형태를 보이죠.



여기서 중요한 질문이 하나 생깁니다.

"이런 데이터를 왜 선형회귀로 예측하면 안 될까?"


이유는 간단합니다.

선형회귀는 예측값이 음수가 될 수 있음
정규분포 기반이라 분산이 일정하다고 가정함
count 데이터는 본질적으로 분포가 완전히 다름
그래서 등장하는 모델이

포아송 회귀(Posson Regression)와

그 한계를 해결한 음이항 회귀(Negative Binominal Regression)입니다.
<img width="1024" height="1024" alt="image" src="https://github.com/user-attachments/assets/e8785043-1e0e-4990-8dcf-2f898cfb30ca" />



## 1. 포아송 분포(Possion Distribution) - "희귀한 사건의 횟수"
포아송 분포는 한 문장으로 정리하면  이렇습니다.

"단위 시간/공간에서 어떤 사건이 몇 번 발생하는 가?"


제조업 예시로는:

하루 동안 불량이 몇 개 발생했는가
한 달 동안 특정 엔진에서 고장이 몇 번 났는가
1,000대당 클레임이 몇 건 발생했는가


이런 데이터가 전형적인 포아송 데이터입니다.



포아송 분포의 핵심 가정이 하나 있습니다:

평균 = 분산

예를 들어 평균 고장 횟수가 2회라면,

고장 횟수의 분산도 2여야 한다는 뜻.



여기서 문제가 발생합니다.

## 2. 제조업, 자동차 데이터는 "과대산포(Overdispersion)"가 거의 항상 존재한다
현실 데이터에서는 대부분

분산이 평균보다 훨씬 크다는 문제가 생깁니다.

이걸 과대산포(Over-dispersion)라고 불러요.



예시로 볼까요?



예: A공장의 일일 불량 데이터

평균(λ) = 2
분산 = 15


분산이 평균보다 7~8배 이상 커짐

-> 포아송 가정과 완전히 다름



왜 이런 일이 생길까요?



특정 날은 설비 이상으로 불량이 몰림
공정 자체가 일정하지 않음
환경 조건(온도, 습도)이 크게 흔들림
제품 종류가 매일 조금씩 다름
즉, 현실의 제조 데이터는 균일하지 않다는 뜻입니다.



포아송 분포는 이런 "불균일성"을 설명하지 못합니다.

## 3. 그래서 등장한 모델 - "음이항 회귀"
음이항(Negative Binominal) 회귀는

포아송의 핵심 가정을 완화한 모델입니다.



핵심 차이는 딱 하나:

포아송: 평균 = 분산
음이항: 분산 >= 평균 (항상 더 큼)


음이항 모델은 분산을 다음처럼 표현합니다.



Var(Y) = μ + αμ²



α(알파)가 0이면 포아송과 동일하지만,
α가 커질수록 분산이 훨씬 커지는 데이터를 설명합니다.



즉, 제조업처럼 "일부 날에 불량 폭발처럼 튀는 패턴"을 잘 설명합니다.

## 4. 포아송 vs 음이항 - 실제 데이터로 비교
예를 들어 30일 동안 부품 불량 건수가 다음과 같습니다.

대부분 0~2개
가끔 5~10개
특정 날 20개 발생


이런 데이터에 포아송 회귀를 사용하면:

평균 2로 수렴
20 같은 값을 절대 설명 못함
모델이 왜곡됨
p-value 엉터리
예측력 심각하게 떨어짐
반대로 음이항 회귀는:

"불량이 몰리는 날이 있다"는 특성까지 반영
평균과 분산 차이를 자연스럽게 해석
계수(p-value)가 안정적
예측력도 개선
그래서 통계에서는 이렇게 말합니다:

"현실의 count 데이터는 음이항이 기본이고,
포아송은 특별한 경우만 사용한다."
## 5. 제조업, 자동차에서 대표적으로 음이항 모델이 필요한 상황
고장 횟수가 차량마다 들쭉날쭉
모델별, 공장별로 품질 편차가 큼
특정 기간에 불량이 몰리는 경우
공정 환경 변화로 분포가 크게 흔들릴 때
"0이 너무 많은" 데이터
장비별 편차가 심할 때


이건 포아송이 전혀 설명할 수 없는 특성들입니다.

## 6. 어떻게 판단할까? (실제 분석에서 필요한 기준)
1) 분산이 평균보다 크면 -> 음이항

협소하게 보면

Mean = 2
Variance = 2 -> 포아송 가능
Variance = 6 -> 음이항 거의 확실


2) 포아송 회귀 돌려보고 "잔차 분산이 너무 크면" -> 음이항



3) AIC 비교

음이항이 더 낮으면 (대부분) 음이항 채택

## 7. 한 장 요약


항목                                                                          포아송 회귀                             음이항 회귀

가정	평균=분산	분산 ≥ 평균
분산이 큰 데이터	처리 ❌	처리 ⭕
현실성	낮음	매우 높음
제조/자동차 적합성	드묾	거의 항상 적합
과대산포 해결	불가능	가능


실무 요약 : Count 데이터는 일단 음이항을 먼저 고민하고,
아주 균일한 경우에만 포아송을 사용한다.
